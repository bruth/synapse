var __slice=Array.prototype.slice;define("synapse/core",[],function(){var a;return a={},{toString:Object.prototype.toString,getType:function(a){return this.toString.call(a).match(/^\[object\s(.*)\]$/)[1].toLowerCase()},publish:function(){var b,c,d,e,f,g,h;c=arguments[0],b=2>arguments.length?[]:__slice.call(arguments,1),e=a[c]||[],h=[];for(f=0,g=e.length;f<g;f++)d=e[f],h.push(d.handler.apply(d.context,b));return h},subscribe:function(b,c,d){var e;return a[b]||(a[b]=[]),e={handler:c,context:d||c},a[b].push(e),[b,e]},unsubscribe:function(b){var c,d,e,f,g;if(e=a[b[0]]){g=[];for(d=0,f=e.length;d<f;d++){c=e[d];if(d===b[1]){e.splice(c,1);break}}return g}}}});var __slice=Array.prototype.slice;define("synapse/connect",["synapse/core"],function(a){var b,c,d;return d={event:null,subjectInterface:null,observerInterface:null,converter:null,triggerOnBind:!0},c=function(b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q;for(k in d)o=d[k],e[k]||(e[k]=o);(g=e.converter)&&a.getType(g)!=="function"&&(g=c.object[g]);if(!(m=e.subjectInterface)&&!(m=b.detectInterface()||c.detectOtherInterface())&&!g)throw new Error("An interface for "+b.type+" objects could not be detected");if(!(l=e.observerInterface)&&!(l=c.detectInterface()||b.detectOtherInterface()))throw new Error("An interface for "+c.type+" objects could not be detected");(i=e.event)||(i=b.detectEvent(m)),a.getType(i)!=="array"&&(i=[i]),n=e.triggerOnBind;for(p=0,q=i.length;p<q;p++)h=i[p],m?f=""+b.guid+":"+m:f=""+b.guid+":"+h,c.channels.push(f),a.subscribe(f,function(a){return g&&(a=g(a)),c.set(l,a)}),j=function(c){return o=b.get(m),a.publish(f,o)},b.on(h,j),n&&j()},b=function(){var b,d,e,f,g,h,i,j,k;i=arguments[0],f=arguments[1],e=3>arguments.length?[]:__slice.call(arguments,2),h=e,b=e[0],d=e[1];if(a.getType(b)==="function")h={converter:b};else if(a.getType(b)==="array"||a.getType(b)!=="object")h={subjectInterface:b,observerInterface:d};a.getType(h)!=="array"&&(h=[h]);for(j=0,k=h.length;j<k;j++)g=h[j],c(i,f,g)},b});var __slice=Array.prototype.slice;define("synapse",["synapse/core","synapse/connect"],function(a,b){var c,d,e;return e=1,c=function(){function c(b){var d,f,g,h;if(b instanceof c)return b;if(this.constructor!==c)return new c(b);h=c.hooks;for(f=0,g=h.length;f<g;f++){d=h[f];if(d.checkObjectType(b)){this.type=d.typeName,this.hook=d,this.guid=e++,this.raw=(typeof d.coerceObject=="function"?d.coerceObject(b):void 0)||b,this.channels=[];return}}throw new Error("No hook exists for "+a.getType(b)+" types")}return c.prototype.version="0.3",c.prototype.detectEvent=function(){var a,b;if(a=(b=this.hook).detectEvent.apply(b,[this.raw].concat(__slice.call(arguments))))return a;throw new Error(""+this.type+" types do not support events")},c.prototype.on=function(){var a,b;if(a=typeof (b=this.hook).onEventHandler=="function"?b.onEventHandler.apply(b,[this.raw].concat(__slice.call(arguments))):void 0)return this;throw new Error(""+this.type+" types do not support events")},c.prototype.off=function(){var a,b;if(a=typeof (b=this.hook).offEventHandler=="function"?b.offEventHandler.apply(b,[this.raw].concat(__slice.call(arguments))):void 0)return this;throw new Error(""+this.type+" types do not support events")},c.prototype.trigger=function(){var a,b;if(a=typeof (b=this.hook).triggerEventHandler=="function"?b.triggerEventHandler.apply(b,[this.raw].concat(__slice.call(arguments))):void 0)return this;throw new Error(""+this.type+" types do not support events")},c.prototype.detectInterface=function(){var a;return typeof (a=this.hook).detectInterface=="function"?a.detectInterface(this.raw):void 0},c.prototype.detectOtherInterface=function(){var a;return typeof (a=this.hook).detectOtherInterface=="function"?a.detectOtherInterface(this.raw):void 0},c.prototype.get=function(){var a;return(a=this.hook).getHandler.apply(a,[this.raw].concat(__slice.call(arguments)))},c.prototype.set=function(){var a;return(a=this.hook).setHandler.apply(a,[this.raw].concat(__slice.call(arguments))),this},c.prototype.observe=function(){var a,d;return d=arguments[0],a=2>arguments.length?[]:__slice.call(arguments,1),d=new c(d),b.apply(null,[d,this].concat(__slice.call(a))),this},c.prototype.notify=function(){var a,d;return d=arguments[0],a=2>arguments.length?[]:__slice.call(arguments,1),d=new c(d),b.apply(null,[this,d].concat(__slice.call(a))),this},c.prototype.sync=function(a){return a=new c(a),this.observe(a).notify(a),this},c.prototype.toString=function(){var a;return(typeof (a=this.hook).toString=="function"?a.toString(this.raw):void 0)||this.raw.toString()},c}(),c.hooks=d=[],c.addHooks=function(){return d.push.apply(d,arguments)},c})