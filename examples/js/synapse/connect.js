var __slice=Array.prototype.slice;define(["synapse/core"],function(a){var b,c,d;return d={event:null,subjectInterface:null,observerInterface:null,converter:null,triggerOnBind:!0},c=function(b,c,e){var f,g,h,i,j,k,l,m,n,o,p,q;for(k in d)o=d[k],e[k]||(e[k]=o);(g=e.converter)&&a.getType(g)!=="function"&&(g=c.object[g]);if(!(m=e.subjectInterface)&&!(m=b.detectInterface()||c.detectOtherInterface())&&!g)throw new Error("An interface for "+b.type+" objects could not be detected");if(!(l=e.observerInterface)&&!(l=c.detectInterface()||b.detectOtherInterface()))throw new Error("An interface for "+c.type+" objects could not be detected");(i=e.event)||(i=b.detectEvent(m)),a.getType(i)!=="array"&&(i=[i]),n=e.triggerOnBind;for(p=0,q=i.length;p<q;p++)h=i[p],m?f=""+b.guid+":"+m:f=""+b.guid+":"+h,c.channels.push(f),a.subscribe(f,function(a){return g&&(a=g(a)),c.set(l,a)}),j=function(c){return o=b.get(m),a.publish(f,o)},b.on(h,j),n&&j()},b=function(){var b,d,e,f,g,h,i,j,k;i=arguments[0],f=arguments[1],e=3>arguments.length?[]:__slice.call(arguments,2),h=e,b=e[0],d=e[1];if(a.getType(b)==="function")h={converter:b};else if(a.getType(b)==="array"||a.getType(b)!=="object")h={subjectInterface:b,observerInterface:d};a.getType(h)!=="array"&&(h=[h]);for(j=0,k=h.length;j<k;j++)g=h[j],c(i,f,g)},b})