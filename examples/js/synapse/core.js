var __slice=Array.prototype.slice;define(function(){var a;return a={},{toString:Object.prototype.toString,getType:function(a){return this.toString.call(a).match(/^\[object\s(.*)\]$/)[1].toLowerCase()},publish:function(){var b,c,d,e,f,g,h;c=arguments[0],b=2>arguments.length?[]:__slice.call(arguments,1),e=a[c]||[],h=[];for(f=0,g=e.length;f<g;f++)d=e[f],h.push(d.handler.apply(d.context,b));return h},subscribe:function(b,c,d){var e;return a[b]||(a[b]=[]),e={handler:c,context:d||c},a[b].push(e),[b,e]},unsubscribe:function(b){var c,d,e,f,g;if(e=a[b[0]]){g=[];for(d=0,f=e.length;d<f;d++){c=e[d];if(d===b[1]){e.splice(c,1);break}}return g}}}})