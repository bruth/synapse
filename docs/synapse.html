<!DOCTYPE html>  <html> <head>   <title>synapse.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               synapse.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <pre><code>Synapse - The Backbone KVO Library
(c) 2011 Byron Ruth
Synapse may be freely distributed under the MIT license
Version: 0.2
Date: Tue Sep 20 09:18:02 2011 -0400
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">do</span> <span class="nf">(window) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Configuration</h2>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">defaultConfiguration =</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>Adds additional logging at various points</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">debug: </span><span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>Prevents extending jQuery and Backbone classes with the Synapse
methods</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">noConflict: </span><span class="kc">false</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>Default DOM events. When a DOM element is declared the subject of a
binding and no event is specified, the element will be compared to
each item in this list in order to determine the appropriate DOM
event to use. Note that more specific selectors should be listed first
to ensure those events are selected before less selective selectors are
encountered.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">domEvents: </span><span class="p">[</span>
            <span class="p">[</span><span class="s1">&#39;a,:button,:reset&#39;</span><span class="p">,</span> <span class="s1">&#39;click&#39;</span><span class="p">]</span>
            <span class="p">[</span><span class="s1">&#39;select,:checkbox,:radio,textarea&#39;</span><span class="p">,</span> <span class="s1">&#39;change&#39;</span><span class="p">]</span>
            <span class="p">[</span><span class="s1">&#39;:submit&#39;</span><span class="p">,</span> <span class="s1">&#39;submit&#39;</span><span class="p">]</span>
            <span class="p">[</span><span class="s1">&#39;:input&#39;</span><span class="p">,</span> <span class="s1">&#39;keyup&#39;</span><span class="p">]</span>
        <span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <p>The default DOM event to be used if none was detected from the above
list. If not defined, an error will be thrown for undetected events.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">defaultDomEvent: </span><span class="kc">null</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>Default element interfaces relative to their selectors. Each
item will be iterated over in order and compared against using
the <code>jQuery.fn.is()</code> method for comparison. Note that more
specific selectors should be listed first to ensure those events are
selected before less selective selectors are encountered.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">elementInterfaces: </span><span class="p">[</span>
            <span class="p">[</span><span class="s1">&#39;:checkbox,:radio&#39;</span><span class="p">,</span> <span class="s1">&#39;checked&#39;</span><span class="p">]</span>
            <span class="p">[</span><span class="s1">&#39;button&#39;</span><span class="p">,</span> <span class="s1">&#39;html&#39;</span><span class="p">]</span>
            <span class="p">[</span><span class="s1">&#39;:input&#39;</span><span class="p">,</span> <span class="s1">&#39;value&#39;</span><span class="p">]</span>
        <span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>The default element interface to be used if none was detected from
the above list. If not defined, an error will be thrown for undetected
interfaces.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">defaultElementInterface: </span><span class="s1">&#39;text&#39;</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>An array of element attributes to check for a value during interface
detection. This value will be used for the opposite interface.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">elementBindAttributes: </span><span class="p">[</span><span class="s1">&#39;name&#39;</span><span class="p">,</span> <span class="s1">&#39;role&#39;</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>A <code>Synapse</code> object can be defined before script initialization to
provide the configuration.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">configuration = </span><span class="nx">@Synapse</span> <span class="o">or</span> <span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <p>Fill in the rest of the default configurations</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">_</span><span class="p">.</span><span class="nx">defaults</span><span class="p">(</span><span class="nx">configuration</span><span class="p">,</span> <span class="nx">defaultConfiguration</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-12">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-12">&#182;</a>               </div>               <h2>Supported Types</h2>

<p>An enumeration of supported object types including:</p>

<ul>
<li>any object (fallback)</li>
<li>jQuery and DOM elements</li>
<li>Backbone.Model objects</li>
<li>Backbone.Collection objects</li>
<li>Backbone.View objects</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">Types =</span>
        <span class="nv">object: </span><span class="mi">0</span>
        <span class="nv">jquery: </span><span class="mi">1</span>
        <span class="nv">model: </span><span class="mi">2</span>
        <span class="nv">collection: </span><span class="mi">3</span>
        <span class="nv">view: </span><span class="mi">4</span>

    <span class="nv">TypeNames =</span>
        <span class="mi">0</span><span class="o">:</span> <span class="s1">&#39;Object&#39;</span>
        <span class="mi">1</span><span class="o">:</span> <span class="s1">&#39;jQuery&#39;</span>
        <span class="mi">2</span><span class="o">:</span> <span class="s1">&#39;Model&#39;</span>
        <span class="mi">3</span><span class="o">:</span> <span class="s1">&#39;Collection&#39;</span>
        <span class="mi">4</span><span class="o">:</span> <span class="s1">&#39;View&#39;</span>

    <span class="nv">getObjectType = </span><span class="nf">(object) -&gt;</span>

        <span class="k">if</span> <span class="nx">object</span> <span class="k">instanceof</span> <span class="nx">$</span>
            <span class="k">return</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">jquery</span>

        <span class="k">if</span> <span class="nx">object</span> <span class="k">instanceof</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Model</span>
            <span class="k">return</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">model</span>

        <span class="k">if</span> <span class="nx">object</span> <span class="k">instanceof</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Collection</span>
            <span class="k">return</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">collection</span>

        <span class="k">if</span> <span class="nx">object</span> <span class="k">instanceof</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">View</span>
            <span class="k">return</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">view</span>

        <span class="k">return</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">object</span></pre></div>             </td>           </tr>                               <tr id="section-13">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-13">&#182;</a>               </div>               <p>The <code>Synapse</code> constructor acts as a common adapter between objects
providing a common interface for each type of object.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">Synapse = </span><span class="nf">(object) -&gt;</span> <span class="k">new</span> <span class="nx">Synapse</span><span class="p">.</span><span class="nx">fn</span><span class="p">.</span><span class="nx">init</span><span class="p">(</span><span class="nx">object</span><span class="p">)</span>

    <span class="nv">Synapse.guid = </span><span class="mi">1</span>
    <span class="nv">Synapse.cache = </span><span class="p">{}</span>
    <span class="nv">Synapse.version = </span><span class="s1">&#39;0.2&#39;</span>
    <span class="nv">Synapse.configuration = </span><span class="nx">configuration</span>

    <span class="nv">Synapse.fn = Synapse:: =</span>

        <span class="nv">constructor: </span><span class="nx">Synapse</span></pre></div>             </td>           </tr>                               <tr id="section-14">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-14">&#182;</a>               </div>               <p>Keep references to all observers and subjects via their guid, the
corresponding event, and whether it is an active connection.
<code>{ 3: [event, true] }</code>. So the necessary objects can be deferenced
when observing is turned off.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">observers: </span><span class="p">{}</span>
        <span class="nv">subjects: </span><span class="p">{}</span></pre></div>             </td>           </tr>                               <tr id="section-15">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-15">&#182;</a>               </div>               <h2>Constructor</h2>

<p>Ensure the <code>context</code> is not already an instance of <code>Synapse</code>.
Strings and DOM elements are converted to jQuery objects and the
original context is stored for safe-keeping. The <code>type</code> is
determined for inferring the interfaces.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">init: </span><span class="nf">(context) -&gt;</span>
            <span class="k">if</span> <span class="nx">context</span> <span class="k">instanceof</span> <span class="nx">Synapse</span> <span class="k">then</span> <span class="k">return</span> <span class="nx">context</span>

            <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span> <span class="o">or</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isElement</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span>
                <span class="vi">@originalContext = </span><span class="nx">context</span>
                <span class="nv">context = </span><span class="nx">$</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">$</span><span class="p">,</span> <span class="nx">arguments</span><span class="p">)</span>

            <span class="vi">@context = </span><span class="nx">context</span>
            <span class="vi">@type = </span><span class="nx">getObjectType</span><span class="p">(</span><span class="nx">context</span><span class="p">)</span>

            <span class="nx">Synapse</span><span class="p">.</span><span class="nx">cache</span><span class="p">[</span><span class="vi">@guid = </span><span class="nx">Synapse</span><span class="p">.</span><span class="nx">guid</span><span class="o">++</span><span class="p">]</span> <span class="o">=</span> <span class="err">@</span></pre></div>             </td>           </tr>                               <tr id="section-16">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-16">&#182;</a>               </div>               <h2>Bind/Unbind/Trigger</h2>

<p>The common interface between all objects are the <code>bind</code>,
<code>unbind</code>, and <code>trigger</code> methods. The native methods are used if
available and fallback to the methods defined on the
<code>Backbone.Events</code> module.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">bind: </span><span class="o">-&gt;</span>
            <span class="nv">bind = </span><span class="nx">@context</span><span class="p">.</span><span class="nx">bind</span> <span class="o">or</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Events</span><span class="p">.</span><span class="nx">bind</span>
            <span class="nx">bind</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">@context</span><span class="p">,</span> <span class="nx">arguments</span>

        <span class="nv">unbind: </span><span class="o">-&gt;</span>
            <span class="nv">unbind = </span><span class="nx">@context</span><span class="p">.</span><span class="nx">unbind</span> <span class="o">or</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Events</span><span class="p">.</span><span class="nx">unbind</span>
            <span class="nx">unbind</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">@context</span><span class="p">,</span> <span class="nx">arguments</span>

        <span class="nv">trigger: </span><span class="o">-&gt;</span>
            <span class="nv">trigger = </span><span class="nx">@context</span><span class="p">.</span><span class="nx">trigger</span> <span class="o">or</span> <span class="nx">Backbone</span><span class="p">.</span><span class="nx">Events</span><span class="p">.</span><span class="nx">trigger</span>
            <span class="nx">trigger</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">@context</span><span class="p">,</span> <span class="nx">arguments</span></pre></div>             </td>           </tr>                               <tr id="section-17">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-17">&#182;</a>               </div>               <h2>Get/Set</h2>

<p>The second shared interface between all objects are the <code>get</code> and
<code>set</code> methods. The appropriate method of invocation is chosen
depending on the object type. If a <code>jQuery</code> object, the built-in
interfaces are used. The <code>key</code> will be checked on all other objects
to be a method, and then checked for a local <code>get</code>/<code>set</code> method.
The fallback (e.g. object primitives) is to return or set the object
property.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nv">get: </span><span class="nf">(key) -&gt;</span>
            <span class="k">if</span> <span class="nx">@type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">jquery</span>
                <span class="k">return</span> <span class="nx">Synapse</span><span class="p">.</span><span class="nx">interfaces</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">@context</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span>

            <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">@context</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
                <span class="k">return</span> <span class="nx">@context</span><span class="p">[</span><span class="nx">key</span><span class="p">]()</span>

            <span class="k">if</span> <span class="nx">@context</span><span class="p">.</span><span class="nx">get</span>
                <span class="k">return</span> <span class="nx">@context</span><span class="p">.</span><span class="nx">get</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">@context</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span>

            <span class="k">return</span> <span class="nx">@context</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span>

        <span class="nv">set: </span><span class="nf">(key, value) -&gt;</span>
            <span class="k">if</span> <span class="o">not</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
                <span class="nv">attrs = </span><span class="p">{}</span>
                <span class="nx">attrs</span><span class="p">[</span><span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">value</span>
            <span class="k">else</span>
                <span class="nv">attrs = </span><span class="nx">key</span>

            <span class="k">if</span> <span class="nx">@type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">jquery</span>
                <span class="k">for</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">v</span> <span class="k">of</span> <span class="nx">attrs</span>
                    <span class="nx">Synapse</span><span class="p">.</span><span class="nx">interfaces</span><span class="p">.</span><span class="nx">set</span><span class="p">(</span><span class="nx">@context</span><span class="p">,</span> <span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">)</span>
            <span class="k">else</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">@context</span><span class="p">[</span><span class="nx">key</span><span class="p">])</span>
                <span class="nx">@context</span><span class="p">[</span><span class="nx">key</span><span class="p">](</span><span class="nx">value</span><span class="p">)</span>
            <span class="k">else</span> <span class="k">if</span> <span class="nx">@context</span><span class="p">.</span><span class="nx">set</span>
                <span class="nx">@context</span><span class="p">.</span><span class="nx">set</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="nx">@context</span><span class="p">,</span> <span class="nx">attrs</span><span class="p">)</span>
            <span class="k">else</span>
                <span class="nx">_</span><span class="p">.</span><span class="nx">extend</span> <span class="nx">@context</span><span class="p">,</span> <span class="nx">attrs</span>

            <span class="k">return</span> <span class="err">@</span>

        <span class="nv">sync: </span><span class="nf">(other) -&gt;</span>
            <span class="k">if</span> <span class="o">not</span> <span class="p">(</span><span class="nx">other</span> <span class="k">instanceof</span> <span class="nx">Synapse</span><span class="p">)</span>
                <span class="nv">other = </span><span class="nx">Synapse</span><span class="p">(</span><span class="nx">other</span><span class="p">)</span>
            <span class="nx">@observe</span><span class="p">(</span><span class="nx">other</span><span class="p">).</span><span class="nx">notify</span><span class="p">(</span><span class="nx">other</span><span class="p">)</span>

        <span class="nv">observe: </span><span class="nf">(other, args...) -&gt;</span>
            <span class="k">if</span> <span class="o">not</span> <span class="p">(</span><span class="nx">other</span> <span class="k">instanceof</span> <span class="nx">Synapse</span><span class="p">)</span>
                <span class="nv">other = </span><span class="nx">Synapse</span><span class="p">(</span><span class="nx">other</span><span class="p">)</span>
            <span class="nx">connect</span><span class="p">(</span><span class="nx">other</span><span class="p">,</span> <span class="err">@</span><span class="p">,</span> <span class="nx">args</span><span class="p">...)</span>
            <span class="k">return</span> <span class="err">@</span>

        <span class="nv">notify: </span><span class="nf">(other, args...) -&gt;</span>
            <span class="k">if</span> <span class="o">not</span> <span class="p">(</span><span class="nx">other</span> <span class="k">instanceof</span> <span class="nx">Synapse</span><span class="p">)</span>
                <span class="nv">other = </span><span class="nx">Synapse</span><span class="p">(</span><span class="nx">other</span><span class="p">)</span>
            <span class="nx">connect</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="nx">other</span><span class="p">,</span> <span class="nx">args</span><span class="p">...)</span>
            <span class="k">return</span> <span class="err">@</span>

        <span class="nv">toString: </span><span class="o">-&gt;</span> <span class="s2">&quot;&lt;Synapse #{TypeNames[@type]} ##{@guid}&gt;&quot;</span>

    <span class="nv">Synapse.fn.init:: = </span><span class="nx">Synapse</span><span class="p">.</span><span class="nx">fn</span></pre></div>             </td>           </tr>                               <tr id="section-18">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-18">&#182;</a>               </div>               <p>Iterates over each selector and event in <code>domEvents</code> and
compares it with the subject <code>context</code> (e.g. the <code>jQuery</code> object).</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">detectDomEvent = </span><span class="nf">(elem) -&gt;</span>
        <span class="k">for</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">Synapse</span><span class="p">.</span><span class="nx">configuration</span><span class="p">.</span><span class="nx">domEvents</span>
            <span class="p">[</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">event</span><span class="p">]</span> <span class="o">=</span> <span class="nx">item</span>
            <span class="k">if</span> <span class="nx">elem</span><span class="p">.</span><span class="o">is</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="k">then</span> <span class="k">return</span> <span class="nx">event</span>
        <span class="k">if</span> <span class="nx">Synapse</span><span class="p">.</span><span class="nx">configuration</span><span class="p">.</span><span class="nx">defaultDomEvent</span>
            <span class="k">return</span> <span class="nx">Synapse</span><span class="p">.</span><span class="nx">configuration</span><span class="p">.</span><span class="nx">defaultDomEvent</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Event for #{elem} could not be detected.&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-19">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-19">&#182;</a>               </div>               <p>Return an array of events for the given subject. if <code>event</code> is not
supplied, attempt to detect the appropriate event for the object type.
An array is used when subjects are being observed via multiple events.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">getEvents = </span><span class="nf">(subject, event) -&gt;</span>
        <span class="k">if</span> <span class="o">not</span> <span class="nx">event</span>
            <span class="k">if</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">jquery</span>
                <span class="nv">events = </span><span class="p">[</span><span class="nx">detectDomEvent</span><span class="p">(</span><span class="nx">subject</span><span class="p">.</span><span class="nx">context</span><span class="p">)]</span>
            <span class="k">else</span> <span class="k">if</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">view</span>
                <span class="nv">events = </span><span class="p">[</span><span class="nx">detectDomEvent</span><span class="p">(</span><span class="nx">subject</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">el</span><span class="p">)]</span>
            <span class="k">else</span> <span class="k">if</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">model</span>
                <span class="nv">events = </span><span class="p">[</span><span class="s1">&#39;change&#39;</span><span class="p">]</span>
            <span class="k">else</span>
                <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s1">&#39;No event defined for subject&#39;</span><span class="p">)</span>
        <span class="k">else</span>
            <span class="nv">events = </span><span class="k">if</span> <span class="o">not</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">event</span><span class="p">)</span> <span class="k">then</span> <span class="p">[</span><span class="nx">event</span><span class="p">]</span> <span class="k">else</span> <span class="nx">event</span>

        <span class="k">return</span> <span class="nx">events</span>

    <span class="nv">Synapse.getEvents = </span><span class="nx">getEvents</span></pre></div>             </td>           </tr>                               <tr id="section-20">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-20">&#182;</a>               </div>               <h2>Get/Set Handlers</h2>

<p>Default event handlers for the various object types. Each type has a
handler for when it is the subject and for when it is the observer.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">defaultHandlers =</span>
        <span class="nv">get: </span><span class="nf">(subject, event, converter, interfaces, set, trigger) -&gt;</span>
            <span class="nx">subject</span><span class="p">.</span><span class="nx">bind</span> <span class="nx">event</span><span class="p">,</span> <span class="o">-&gt;</span>
                <span class="nv">value = </span><span class="nx">_</span><span class="p">.</span><span class="nx">map</span> <span class="nx">interfaces</span><span class="p">,</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">get</span><span class="p">,</span> <span class="nx">subject</span>

                <span class="k">if</span> <span class="nx">converter</span>
                    <span class="nv">value = </span><span class="nx">converter</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">converter</span><span class="p">,</span> <span class="nx">value</span>
                    <span class="k">if</span> <span class="o">not</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
                        <span class="nv">value = </span><span class="p">[</span><span class="nx">value</span><span class="p">]</span>

                <span class="nx">set</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span> <span class="nx">value</span>

            <span class="k">if</span> <span class="nx">trigger</span> <span class="k">then</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">trigger</span> <span class="nx">event</span>


        <span class="nv">set: </span><span class="nf">(observer, interfaces) -&gt;</span>
            <span class="k">return</span> <span class="nf">(args...) -&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-21">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-21">&#182;</a>               </div>               <p>for each setter interface defined, use the value for each</p>             </td>             <td class="code">               <div class="highlight"><pre>                <span class="k">for</span> <span class="nx">interface</span> <span class="k">in</span> <span class="nx">interfaces</span>
                    <span class="nx">observer</span><span class="p">.</span><span class="nx">set</span> <span class="nx">interface</span><span class="p">,</span> <span class="nx">args</span><span class="p">...</span>


    <span class="nv">getHandlerForType = </span><span class="nf">(type, method) -&gt;</span>
        <span class="k">if</span> <span class="o">not</span> <span class="p">(</span><span class="nv">handler = </span><span class="nx">Synapse</span><span class="p">.</span><span class="nx">handlers</span><span class="p">[</span><span class="nx">type</span><span class="p">]</span><span class="o">?</span><span class="p">[</span><span class="nx">method</span><span class="p">])</span>
            <span class="nv">handler = </span><span class="nx">defaultHandlers</span><span class="p">[</span><span class="nx">method</span><span class="p">]</span>
        <span class="k">return</span> <span class="nx">handler</span>


    <span class="nv">Synapse.handlers =</span>
        <span class="mi">2</span><span class="o">:</span></pre></div>             </td>           </tr>                               <tr id="section-22">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-22">&#182;</a>               </div>               <h3>Model <em>get</em> Handler</h3>

<p>The default event for models is <code>change</code>. Interfaces correspond
to model attributes in this context, thus defining events such as
<code>change:title</code>. For alternate events, interfaces may not need
be defined.</p>

<p>Although each event/interface combination has a separate handler,
values received from all interfaces are passed to the <code>set</code>
handler (and <code>converter</code> if defined).</p>

<p>Finally, if trigger the event which is typically used to fill
the observer with the initial values.</p>             </td>             <td class="code">               <div class="highlight"><pre>            <span class="nv">get: </span><span class="nf">(subject, event, converter, interfaces, set, trigger) -&gt;</span>
                <span class="nv">_event = </span><span class="nx">event</span>
                <span class="k">for</span> <span class="nx">attr</span> <span class="k">in</span> <span class="nx">interfaces</span>
                    <span class="k">if</span> <span class="nx">attr</span> <span class="o">and</span> <span class="o">not</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">subject</span><span class="p">.</span><span class="nx">context</span><span class="p">[</span><span class="nx">attr</span><span class="p">])</span>
                        <span class="nv">_event = </span><span class="s2">&quot;#{event}:#{attr}&quot;</span>

                    <span class="nx">subject</span><span class="p">.</span><span class="nx">bind</span> <span class="nx">_event</span><span class="p">,</span> <span class="nf">(model, value, options) -&gt;</span>
                        <span class="nv">value = </span><span class="nx">_</span><span class="p">.</span><span class="nx">map</span> <span class="nx">interfaces</span><span class="p">,</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">get</span><span class="p">,</span> <span class="nx">subject</span>

                        <span class="k">if</span> <span class="nx">converter</span>
                            <span class="nv">value = </span><span class="nx">converter</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">converter</span><span class="p">,</span> <span class="nx">value</span>
                            <span class="k">if</span> <span class="o">not</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span>
                                <span class="nv">value = </span><span class="p">[</span><span class="nx">value</span><span class="p">]</span>

                        <span class="nx">set</span><span class="p">.</span><span class="nx">apply</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span> <span class="nx">value</span>

                    <span class="k">if</span> <span class="nx">trigger</span>
                        <span class="nx">subject</span><span class="p">.</span><span class="nx">trigger</span> <span class="nx">_event</span><span class="p">,</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">context</span><span class="p">,</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">get</span><span class="p">(</span><span class="nx">attr</span><span class="p">)</span>

            <span class="nv">set: </span><span class="nf">(observer, interfaces) -&gt;</span>
                <span class="k">return</span> <span class="nf">(args...) -&gt;</span>
                    <span class="nv">attrs = </span><span class="p">{}</span>
                    <span class="k">for</span> <span class="p">[</span><span class="nx">k</span><span class="p">,</span> <span class="nx">v</span><span class="p">]</span> <span class="k">in</span> <span class="nx">_</span><span class="p">.</span><span class="nx">zip</span><span class="p">(</span><span class="nx">interfaces</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span>
                        <span class="nx">attrs</span><span class="p">[</span><span class="nx">k</span><span class="p">]</span> <span class="o">=</span> <span class="nx">v</span>
                    <span class="nx">observer</span><span class="p">.</span><span class="nx">set</span> <span class="nx">attrs</span></pre></div>             </td>           </tr>                               <tr id="section-23">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-23">&#182;</a>               </div>               <h2>Create a Connection</h2>

<ul>
<li><code>event</code> - the event that will trigger the <code>subjectInterface</code> to be
invoked</li>
<li><code>subjectInterface</code> - the interface for getting a value from the subject</li>
<li><code>observerInterface</code> - the interface for setting a value on the observer</li>
<li><code>converter</code> - an intermediate function that transforms the value received
before passing it to the <code>observerInterface</code></li>
<li><code>triggerOnBind</code> - defines when or not to trigger the event once bound
acting as the <em>initial</em> invocation.</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">defaultRegisterOptions =</span>
        <span class="nv">event: </span><span class="kc">null</span>
        <span class="nv">subjectInterface: </span><span class="kc">null</span>
        <span class="nv">observerInterface: </span><span class="kc">null</span>
        <span class="nv">converter: </span><span class="kc">null</span>
        <span class="nv">triggerOnBind: </span><span class="kc">true</span></pre></div>             </td>           </tr>                               <tr id="section-24">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-24">&#182;</a>               </div>               <p>The workhorse which sets up a single connection between the <code>subject</code>
and <code>observer</code>. Note, the <code>subject</code> and <code>observer</code> are already
<code>Synapse</code> instances.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">connectOne = </span><span class="nf">(subject, observer, options) -&gt;</span>

        <span class="nx">_</span><span class="p">.</span><span class="nx">defaults</span><span class="p">(</span><span class="nx">options</span><span class="p">,</span> <span class="nx">defaultRegisterOptions</span><span class="p">)</span>

        <span class="nv">events = </span><span class="nx">getEvents</span><span class="p">(</span><span class="nx">subject</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">event</span><span class="p">)</span>

        <span class="p">[</span><span class="nx">subjectInterface</span><span class="p">,</span> <span class="nx">observerInterface</span><span class="p">]</span> <span class="o">=</span> <span class="nx">getInterfaces</span><span class="p">(</span><span class="nx">subject</span><span class="p">,</span> <span class="nx">observer</span><span class="p">,</span>
            <span class="nx">options</span><span class="p">.</span><span class="nx">subjectInterface</span><span class="p">,</span> <span class="nx">options</span><span class="p">.</span><span class="nx">observerInterface</span><span class="p">)</span>

        <span class="k">if</span> <span class="p">(</span><span class="nv">converter = </span><span class="nx">options</span><span class="p">.</span><span class="nx">converter</span><span class="p">)</span> <span class="o">and</span> <span class="o">not</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">converter</span><span class="p">)</span>
            <span class="nv">converter = </span><span class="nx">observer</span><span class="p">[</span><span class="nx">converter</span><span class="p">]</span>

        <span class="nv">triggerOnBind = </span><span class="nx">options</span><span class="p">.</span><span class="nx">triggerOnBind</span>

        <span class="nv">getHandler = </span><span class="nx">getHandlerForType</span><span class="p">(</span><span class="nx">subject</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="s1">&#39;get&#39;</span><span class="p">)</span>
        <span class="nv">setHandler = </span><span class="nx">getHandlerForType</span><span class="p">(</span><span class="nx">subject</span><span class="p">.</span><span class="nx">type</span><span class="p">,</span> <span class="s1">&#39;set&#39;</span><span class="p">)</span>

        <span class="nv">setHandler = </span><span class="nx">setHandler</span><span class="p">(</span><span class="nx">observer</span><span class="p">,</span> <span class="nx">observerInterface</span><span class="p">)</span>

        <span class="k">for</span> <span class="nx">event</span> <span class="k">in</span> <span class="nx">events</span>
            <span class="nx">subject</span><span class="p">.</span><span class="nx">observers</span><span class="p">[</span><span class="nx">observer</span><span class="p">.</span><span class="nx">guid</span><span class="p">][</span><span class="nx">event</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span>
            <span class="nx">observer</span><span class="p">.</span><span class="nx">subjects</span><span class="p">[</span><span class="nx">subject</span><span class="p">.</span><span class="nx">guid</span><span class="p">][</span><span class="nx">event</span><span class="p">]</span> <span class="o">=</span> <span class="kc">true</span>

            <span class="nx">getHandler</span><span class="p">(</span><span class="nx">subject</span><span class="p">,</span> <span class="nx">event</span><span class="p">,</span> <span class="nx">converter</span><span class="p">,</span> <span class="nx">subjectInterface</span><span class="p">,</span> <span class="nx">setHandler</span><span class="p">,</span> <span class="nx">triggerOnBind</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-25">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-25">&#182;</a>               </div>               <p>Defines multiple connections between two objects via the
interfaces specified. A few shorthand arguments that can be passed
include:</p>

<ul>
<li><code>subject</code>, <code>observer</code>, <code>converter</code> - interfaces are detected
with a converter. Useful for simple data transformations e.g. raw data &rarr;
HTMLified</li>
<li><code>subject</code>, <code>observer</code>, <code>subjectInterface</code>, <code>observerInterface</code> -
one or both interfaces are explicitly defined. The direction is always
<code>subject</code> &rarr; <code>observer</code>, thus the subject interface is specified
first.</li>
<li><code>subject</code>, <code>observer</code>, <code>options</code> - an <code>options</code> object can be
passed specifying one or all of the connection options, including the
event that will trigger the pipeline.</li>
<li><code>subject</code>, <code>observer</code>, ...</li>
</ul>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">connect = </span><span class="nf">(subject, observer, args...) -&gt;</span>
        <span class="k">if</span> <span class="o">not</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">observers</span><span class="p">[</span><span class="nx">observer</span><span class="p">.</span><span class="nx">guid</span><span class="p">]</span>
            <span class="nx">subject</span><span class="p">.</span><span class="nx">observers</span><span class="p">[</span><span class="nx">observer</span><span class="p">.</span><span class="nx">guid</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="k">if</span> <span class="o">not</span> <span class="nx">observer</span><span class="p">.</span><span class="nx">subjects</span><span class="p">[</span><span class="nx">subject</span><span class="p">.</span><span class="nx">guid</span><span class="p">]</span>
            <span class="nx">observer</span><span class="p">.</span><span class="nx">subjects</span><span class="p">[</span><span class="nx">subject</span><span class="p">.</span><span class="nx">guid</span><span class="p">]</span> <span class="o">=</span> <span class="p">{}</span>

        <span class="nv">options = </span><span class="nx">args</span>
        <span class="nv">arg0 = </span><span class="nx">args</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>
        <span class="nv">arg1 = </span><span class="nx">args</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>

        <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isFunction</span><span class="p">(</span><span class="nx">arg0</span><span class="p">)</span>
            <span class="nv">options = converter: </span><span class="nx">arg0</span>
        <span class="k">else</span> <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">arg0</span><span class="p">)</span> <span class="o">or</span> <span class="o">not</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">arg0</span><span class="p">)</span>
            <span class="nv">options =</span>
                <span class="nv">subjectInterface: </span><span class="nx">arg0</span>
                <span class="nv">observerInterface: </span><span class="nx">arg1</span>
        <span class="k">else</span>
            <span class="nv">options = </span><span class="nx">arg0</span></pre></div>             </td>           </tr>                               <tr id="section-26">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-26">&#182;</a>               </div>               <p>the configuration is already defined as an object</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="k">if</span> <span class="o">not</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">options</span><span class="p">)</span>
            <span class="nv">options = </span><span class="p">[</span><span class="nx">options</span><span class="p">]</span>

        <span class="k">for</span> <span class="nx">opt</span> <span class="k">in</span> <span class="nx">options</span>
            <span class="nx">connectOne</span><span class="p">(</span><span class="nx">subject</span><span class="p">,</span> <span class="nx">observer</span><span class="p">,</span> <span class="nx">opt</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-27">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-27">&#182;</a>               </div>               <p>Iterates over each selector and event in <code>elementInterfaces</code> and
compares it with the subject <code>context</code> (e.g. the <code>jQuery</code> object).</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">detectElementInterface = </span><span class="nf">(elem) -&gt;</span>
        <span class="k">for</span> <span class="nx">item</span> <span class="k">in</span> <span class="nx">Synapse</span><span class="p">.</span><span class="nx">configuration</span><span class="p">.</span><span class="nx">elementInterfaces</span>
            <span class="p">[</span><span class="nx">selector</span><span class="p">,</span> <span class="nx">interface</span><span class="p">]</span> <span class="o">=</span> <span class="nx">item</span>
            <span class="k">if</span> <span class="nx">elem</span><span class="p">.</span><span class="o">is</span><span class="p">(</span><span class="nx">selector</span><span class="p">)</span> <span class="k">then</span> <span class="k">return</span> <span class="nx">interface</span>
        <span class="k">if</span> <span class="nx">Synapse</span><span class="p">.</span><span class="nx">configuration</span><span class="p">.</span><span class="nx">defaultElementInterface</span>
            <span class="k">return</span> <span class="nx">Synapse</span><span class="p">.</span><span class="nx">configuration</span><span class="p">.</span><span class="nx">defaultElementInterface</span>
        <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;Interface for #{elem} could not be detected.&quot;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-28">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-28">&#182;</a>               </div>               <p>Return an array of interfaces appropriate for the given subject/observer.
If no interface is defined, only if a <code>name</code> or <code>role</code> attribute on
either the subject or observer will be used by default. The following steps
are invovled in determining the interfaces:</p>

<ul>
<li>each interface is independently determined first, since the other may
be inferred from the other (specifically in the case of DOM elements)</li>
<li>if either are not defined, each is attempted to be determined relative
to the other</li>
<li>elements can use an arbitrary identifier such as the <code>name</code> or
<code>role</code> attribute (e.g. name="title")</li>
</ul>

<p>The last step slits the string in case multiple interfaces have been
defined for either side.</p>

<p><strong>Special note:</strong>
If no <code>subjectInterface</code> has been set and the subject is a model, assume
the observer wants to observe any change of the model. This generally
assumes a handler of some sorts will be performing any necessary
manipulation.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">getInterfaces = </span><span class="nf">(subject, observer, subjectInterface, observerInterface) -&gt;</span>

        <span class="k">if</span> <span class="o">not</span> <span class="nx">subjectInterface</span>
            <span class="k">if</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">jquery</span>
                <span class="nv">subjectInterface = </span><span class="nx">detectElementInterface</span><span class="p">(</span><span class="nx">subject</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span>
            <span class="k">else</span> <span class="k">if</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">view</span>
                <span class="nv">subjectInterface = </span><span class="nx">detectElementInterface</span><span class="p">(</span><span class="nx">subject</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">el</span><span class="p">)</span>
            <span class="k">else</span> <span class="k">if</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">model</span>
                <span class="nv">subjectInterface = </span><span class="s1">&#39;&#39;</span>

        <span class="k">if</span> <span class="o">not</span> <span class="nx">observerInterface</span>
            <span class="k">if</span> <span class="nx">observer</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">jquery</span>
                <span class="nv">observerInterface = </span><span class="nx">detectElementInterface</span><span class="p">(</span><span class="nx">observer</span><span class="p">.</span><span class="nx">context</span><span class="p">)</span>
            <span class="k">else</span> <span class="k">if</span> <span class="nx">observer</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">view</span>
                <span class="nv">observerInterface = </span><span class="nx">detectElementInterface</span><span class="p">(</span><span class="nx">observer</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">el</span><span class="p">)</span>

        <span class="k">if</span> <span class="o">not</span> <span class="nx">subjectInterface</span>
            <span class="nv">el = </span><span class="kc">null</span>

            <span class="k">if</span> <span class="nx">observer</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">jquery</span>
                <span class="nv">el = </span><span class="nx">observer</span><span class="p">.</span><span class="nx">context</span>
            <span class="k">else</span> <span class="k">if</span> <span class="nx">observer</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">view</span>
                <span class="nv">el = </span><span class="nx">observer</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">el</span>

            <span class="k">if</span> <span class="nx">el</span>
                <span class="k">for</span> <span class="nx">attr</span> <span class="k">in</span> <span class="nx">Synapse</span><span class="p">.</span><span class="nx">configuration</span><span class="p">.</span><span class="nx">elementBindAttributes</span>
                    <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">attr</span><span class="p">)</span>
                        <span class="nv">subjectInterface = </span><span class="nx">el</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">attr</span><span class="p">)</span>
                        <span class="k">break</span>

        <span class="k">if</span> <span class="o">not</span> <span class="nx">observerInterface</span>
            <span class="nv">el = </span><span class="kc">null</span>

            <span class="k">if</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">jquery</span>
                <span class="nv">el = </span><span class="nx">subject</span><span class="p">.</span><span class="nx">context</span>
            <span class="k">else</span> <span class="k">if</span> <span class="nx">subject</span><span class="p">.</span><span class="nx">type</span> <span class="o">is</span> <span class="nx">Types</span><span class="p">.</span><span class="nx">view</span>
                <span class="nv">el = </span><span class="nx">subject</span><span class="p">.</span><span class="nx">context</span><span class="p">.</span><span class="nx">el</span>

            <span class="k">if</span> <span class="nx">el</span>
                <span class="k">for</span> <span class="nx">attr</span> <span class="k">in</span> <span class="nx">Synapse</span><span class="p">.</span><span class="nx">configuration</span><span class="p">.</span><span class="nx">elementBindAttributes</span>
                    <span class="k">if</span> <span class="nx">el</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">attr</span><span class="p">)</span>
                        <span class="nv">observerInterface = </span><span class="nx">el</span><span class="p">.</span><span class="nx">attr</span><span class="p">(</span><span class="nx">attr</span><span class="p">)</span>
                        <span class="k">break</span>
            <span class="k">else</span>
                <span class="nv">observerInterface = </span><span class="nx">subjectInterface</span>

        <span class="k">if</span> <span class="o">not</span> <span class="nx">observerInterface</span>
            <span class="k">throw</span> <span class="k">new</span> <span class="nb">Error</span><span class="p">(</span><span class="s2">&quot;The interfaces between #{subject} and #{observer}</span>
<span class="s2">                could be detected - #{subjectInterface} =&gt; #{observerInterface}&quot;</span><span class="p">)</span>

        <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">subjectInterface</span><span class="p">)</span> <span class="k">then</span> <span class="nv">subjectInterface = </span><span class="nx">subjectInterface</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>
        <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isString</span><span class="p">(</span><span class="nx">observerInterface</span><span class="p">)</span> <span class="k">then</span> <span class="nv">observerInterface = </span><span class="nx">observerInterface</span><span class="p">.</span><span class="nx">split</span><span class="p">(</span><span class="s1">&#39; &#39;</span><span class="p">)</span>

        <span class="k">return</span> <span class="p">[</span><span class="nx">subjectInterface</span><span class="p">,</span> <span class="nx">observerInterface</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-29">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-29">&#182;</a>               </div>               <h3>Interfaces Registry</h3>

<p>Simple module allowing for [un]registering interfaces. The <code>get</code> and
<code>set</code> methods are defined here which are used by <code>Synapse</code> instances
as the common interface for <code>jQuery</code> objects.</p>

<p>Compound interfaces correspond to other jQuery APIs such as <code>attr</code>,
<code>prop</code> and <code>data</code> and require their own <code>key</code>, thus the
<code>attr:name</code> convention. In this case, the <code>key</code> will be extracted
and passed as the first argument to the interface handler.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nv">interfaces = </span><span class="nx">do</span> <span class="o">-&gt;</span>
        <span class="nv">registry: </span><span class="p">{}</span>

        <span class="nv">register: </span><span class="nf">(config) -&gt;</span>
            <span class="nx">@registry</span><span class="p">[</span><span class="nx">config</span><span class="p">.</span><span class="nx">name</span><span class="p">]</span> <span class="o">=</span> <span class="nx">config</span>

        <span class="nv">unregister: </span><span class="nf">(name) -&gt;</span>
            <span class="k">delete</span> <span class="nx">@registry</span><span class="p">[</span><span class="nx">name</span><span class="p">]</span>

        <span class="nv">get: </span><span class="nf">(context, name, args...) -&gt;</span>
            <span class="k">if</span> <span class="nx">context</span> <span class="k">instanceof</span> <span class="nx">Synapse</span>
                <span class="nv">context = </span><span class="nx">context</span><span class="p">.</span><span class="nx">context</span>

            <span class="p">[</span><span class="nx">name</span><span class="p">,</span> <span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">split</span> <span class="s1">&#39;:&#39;</span>
            <span class="k">if</span> <span class="nx">key</span><span class="o">?</span> <span class="k">then</span> <span class="nv">args = </span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span>
            <span class="nx">@registry</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">get</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span>

        <span class="nv">set: </span><span class="nf">(context, name, args...) -&gt;</span>
            <span class="k">if</span> <span class="nx">context</span> <span class="k">instanceof</span> <span class="nx">Synapse</span>
                <span class="nv">context = </span><span class="nx">context</span><span class="p">.</span><span class="nx">context</span>

            <span class="p">[</span><span class="nx">name</span><span class="p">,</span> <span class="nx">key</span><span class="p">]</span> <span class="o">=</span> <span class="nx">name</span><span class="p">.</span><span class="nx">split</span> <span class="s1">&#39;:&#39;</span>
            <span class="k">if</span> <span class="nx">key</span><span class="o">?</span> <span class="k">then</span> <span class="nv">args = </span><span class="p">[</span><span class="nx">key</span><span class="p">].</span><span class="nx">concat</span><span class="p">(</span><span class="nx">args</span><span class="p">)</span>
            <span class="nx">@registry</span><span class="p">[</span><span class="nx">name</span><span class="p">].</span><span class="nx">set</span><span class="p">.</span><span class="nx">apply</span><span class="p">(</span><span class="nx">context</span><span class="p">,</span> <span class="nx">args</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-30">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-30">&#182;</a>               </div>               <h3>Built-In interfaces</h3>

<p>Each setter and getter for compound interfaces are defined up front
for use throughout the interfaces. For older versions of jQuery, <code>attr</code>
will be used instread of <code>prop</code>.</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="nx">do</span> <span class="o">-&gt;</span>
        <span class="nv">getProperty = </span><span class="nf">(key) -&gt;</span>
            <span class="k">if</span> <span class="nx">@prop</span><span class="o">?</span>
                <span class="k">return</span> <span class="nx">@prop</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
            <span class="nx">getAttribute</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span>

        <span class="nv">setProperty = </span><span class="nf">(key, value) -&gt;</span>
            <span class="k">if</span> <span class="nx">@prop</span><span class="o">?</span>
                <span class="k">if</span> <span class="k">typeof</span> <span class="nx">key</span> <span class="o">is</span> <span class="s1">&#39;object&#39;</span>
                    <span class="k">return</span> <span class="nx">@prop</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
                <span class="k">return</span> <span class="nx">@prop</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>
            <span class="nx">setAttribute</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>

        <span class="nv">getAttribute = </span><span class="nf">(key) -&gt;</span> <span class="nx">@attr</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>

        <span class="nv">setAttribute = </span><span class="nf">(key, value) -&gt;</span>
            <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="k">then</span> <span class="nx">@attr</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="k">else</span> <span class="nx">@attr</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>


        <span class="nv">getStyle = </span><span class="nf">(key) -&gt;</span> <span class="nx">@css</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>

        <span class="nv">setStyle = </span><span class="nf">(key, value) -&gt;</span>
            <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isObject</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="k">then</span> <span class="nx">@css</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="k">else</span> <span class="nx">@css</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-31">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-31">&#182;</a>               </div>               <h3><em>text</em></h3>

<p>Gets and sets the <code>innerText</code> of the element</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;text&#39;</span>
            <span class="nv">get: </span><span class="o">-&gt;</span> <span class="nx">@text</span><span class="p">()</span>
            <span class="nv">set: </span><span class="nf">(value) -&gt;</span> <span class="nx">@text</span><span class="p">((</span><span class="nx">value</span> <span class="o">or=</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">toString</span><span class="p">())</span></pre></div>             </td>           </tr>                               <tr id="section-32">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-32">&#182;</a>               </div>               <h3><em>html</em></h3>

<p>Gets and sets the <code>innerHTML</code> of the element</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;html&#39;</span>
            <span class="nv">get: </span><span class="o">-&gt;</span> <span class="nx">@html</span><span class="p">()</span>
            <span class="nv">set: </span><span class="nf">(value) -&gt;</span> <span class="nx">@html</span><span class="p">((</span><span class="nx">value</span> <span class="o">or=</span> <span class="s1">&#39;&#39;</span><span class="p">).</span><span class="nx">toString</span><span class="p">())</span></pre></div>             </td>           </tr>                               <tr id="section-33">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-33">&#182;</a>               </div>               <h3><em>value</em></h3>

<p>Gets and sets the <code>value</code> of the element. This is to be used with form
fields.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;value&#39;</span>
            <span class="nv">get: </span><span class="o">-&gt;</span> <span class="nx">@val</span><span class="p">()</span>
            <span class="nv">set: </span><span class="nf">(value) -&gt;</span> <span class="nx">@val</span><span class="p">(</span><span class="nx">value</span> <span class="o">or=</span> <span class="s1">&#39;&#39;</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-34">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-34">&#182;</a>               </div>               <h3><em>enabled</em></h3>

<p>Gets and sets the <code>disabled</code> property of the element. The disabled
property is directly related to the truth of the value. That is, if the
value is true the element will be enabled.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;enabled&#39;</span><span class="p">,</span>
            <span class="nv">get: </span><span class="o">-&gt;</span>
                <span class="o">!</span><span class="nx">getProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="nv">set: </span><span class="nf">(value) -&gt;</span>
                <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">and</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">is</span> <span class="mi">0</span>
                    <span class="nv">value = </span><span class="kc">false</span>
                <span class="nx">setProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="o">!</span><span class="nb">Boolean</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span></pre></div>             </td>           </tr>                               <tr id="section-35">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-35">&#182;</a>               </div>               <h3><em>disabled</em></h3>

<p>Gets and sets the <code>disabled</code> property of the element. The disabled
property is inversely related to the truth of the value. That is, if the
value is true the element will be disabled.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;disabled&#39;</span>
            <span class="nv">get: </span><span class="o">-&gt;</span>
                <span class="nx">getProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="s1">&#39;disabled&#39;</span><span class="p">)</span>
            <span class="nv">set: </span><span class="nf">(value) -&gt;</span>
                <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">and</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">is</span> <span class="mi">0</span>
                    <span class="nv">value = </span><span class="kc">false</span>
                <span class="nx">setProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="s1">&#39;disabled&#39;</span><span class="p">,</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span></pre></div>             </td>           </tr>                               <tr id="section-36">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-36">&#182;</a>               </div>               <h3><em>checked</em></h3>

<p>Gets and sets the <code>checked</code> property of the element. Applied to
checkboxes and radio buttons. </p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;checked&#39;</span>
            <span class="nv">get: </span><span class="o">-&gt;</span>
                <span class="nx">getProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="s1">&#39;checked&#39;</span><span class="p">)</span>
            <span class="nv">set: </span><span class="nf">(value) -&gt;</span>
                <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">and</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">is</span> <span class="mi">0</span>
                    <span class="nv">value = </span><span class="kc">false</span>
                <span class="nx">setProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="s1">&#39;checked&#39;</span><span class="p">,</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">value</span><span class="p">))</span></pre></div>             </td>           </tr>                               <tr id="section-37">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-37">&#182;</a>               </div>               <h3><em>visible</em></h3>

<p>An implied one-way interface that toggles the element's visibility
based on the truth of the value it is observing.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;visible&#39;</span>
            <span class="nv">get: </span><span class="o">-&gt;</span>
                <span class="nx">getStyle</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="s1">&#39;display&#39;</span><span class="p">)</span> <span class="o">is</span> <span class="o">not</span> <span class="s1">&#39;none&#39;</span>
            <span class="nv">set: </span><span class="nf">(value) -&gt;</span>
                <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">and</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">is</span> <span class="mi">0</span>
                    <span class="nv">value = </span><span class="kc">false</span>
                <span class="k">if</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="k">then</span> <span class="nx">@show</span><span class="p">()</span> <span class="k">else</span> <span class="nx">@hide</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-38">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-38">&#182;</a>               </div>               <h3><em>hidden</em></h3>

<p>An implied one-way interface that toggles the element's visibility
based on the truth of the value it is observing.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;hidden&#39;</span>
            <span class="nv">get: </span><span class="o">-&gt;</span>
                <span class="nx">getStyle</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="s1">&#39;display&#39;</span><span class="p">)</span> <span class="o">is</span> <span class="s1">&#39;none&#39;</span>
            <span class="nv">set: </span><span class="nf">(value) -&gt;</span>
                <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">and</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">is</span> <span class="mi">0</span>
                    <span class="nv">value = </span><span class="kc">false</span>
                <span class="k">if</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="k">then</span> <span class="nx">@hide</span><span class="p">()</span> <span class="k">else</span> <span class="nx">@show</span><span class="p">()</span></pre></div>             </td>           </tr>                               <tr id="section-39">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-39">&#182;</a>               </div>               <h3>Compound interfaces</h3>             </td>             <td class="code">               <div class="highlight"><pre></pre></div>             </td>           </tr>                               <tr id="section-40">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-40">&#182;</a>               </div>               <h3><em>prop:FOO</em></h3>

<p>Gets and sets a property on the target element.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;prop&#39;</span>
            <span class="nv">get: </span><span class="nf">(key) -&gt;</span> <span class="nx">getProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span>
            <span class="nv">set: </span><span class="nf">(key, value) -&gt;</span> <span class="nx">setProperty</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-41">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-41">&#182;</a>               </div>               <h3><em>attr:FOO</em></h3>

<p>Gets and sets an attribute on the target element.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;attr&#39;</span>
            <span class="nv">get: </span><span class="nf">(key) -&gt;</span> <span class="nx">getAttribute</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span>
            <span class="nv">set: </span><span class="nf">(key, value) -&gt;</span> <span class="nx">setAttribute</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-42">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-42">&#182;</a>               </div>               <h3><em>style:FOO</em></h3>

<p>Gets and sets a style property on the target element.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;style&#39;</span>
            <span class="nv">get: </span><span class="nf">(key) -&gt;</span> <span class="nx">getStyle</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="nx">key</span><span class="p">)</span>
            <span class="nv">set: </span><span class="nf">(key, value) -&gt;</span> <span class="nx">setStyle</span><span class="p">.</span><span class="nx">call</span><span class="p">(</span><span class="err">@</span><span class="p">,</span> <span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-43">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-43">&#182;</a>               </div>               <h3><em>css:FOO</em></h3>

<p>Gets and sets a CSS class on the target element.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;css&#39;</span>
            <span class="nv">get: </span><span class="nf">(key) -&gt;</span> <span class="nx">@hasClass</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
            <span class="nv">set: </span><span class="nf">(key, value) -&gt;</span>
                <span class="k">if</span> <span class="nx">_</span><span class="p">.</span><span class="nx">isArray</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="o">and</span> <span class="nx">value</span><span class="p">.</span><span class="nx">length</span> <span class="o">is</span> <span class="mi">0</span>
                    <span class="nv">value = </span><span class="kc">false</span>
                <span class="k">if</span> <span class="nb">Boolean</span><span class="p">(</span><span class="nx">value</span><span class="p">)</span> <span class="k">then</span> <span class="nx">@addClass</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span> <span class="k">else</span> <span class="nx">@removeClass</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span></pre></div>             </td>           </tr>                               <tr id="section-44">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-44">&#182;</a>               </div>               <h3><em>data:FOO</em></h3>

<p>Gets and sets an attribute on the target element using the jQuery
data API.</p>             </td>             <td class="code">               <div class="highlight"><pre>        <span class="nx">interfaces</span><span class="p">.</span><span class="nx">register</span>
            <span class="nv">name: </span><span class="s1">&#39;data&#39;</span>
            <span class="nv">get: </span><span class="nf">(key) -&gt;</span> <span class="nx">@data</span><span class="p">(</span><span class="nx">key</span><span class="p">)</span>
            <span class="nv">set: </span><span class="nf">(key, value) -&gt;</span> <span class="nx">@data</span><span class="p">(</span><span class="nx">key</span><span class="p">,</span> <span class="nx">value</span><span class="p">)</span>


    <span class="nv">Synapse.getInterfaces = </span><span class="nx">getInterfaces</span>
    <span class="nv">Synapse.interfaces = </span><span class="nx">interfaces</span>

    <span class="nb">window</span><span class="p">.</span><span class="nv">Synapse = </span><span class="nx">Synapse</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 