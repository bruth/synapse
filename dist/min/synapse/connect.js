var __slice=Array.prototype.slice;(function(a,b){return typeof exports!="undefined"?b(a,exports,require("synapse/core")):typeof define=="function"&&define.amd?define("synapse/connect",["synapse/core","exports"],function(c,d){return b(a,d,c)}):a.SynapseConnect=b(a,{},a.SynapseCore)})(this,function(a,b,c){var d,e,f,g,h,i,j,k;return f=function(){var a,b,c,d;b=arguments[0],a=2>arguments.length?[]:__slice.call(arguments,1);if(c=(d=b.hook).detectEvent.apply(d,[b.raw].concat(__slice.call(a))))return c;throw new Error(""+b.hook.typeName+" types do not support events")},j=function(){var a,b,c,d;b=arguments[0],a=2>arguments.length?[]:__slice.call(arguments,1);if(c=typeof (d=b.hook).onEventHandler=="function"?d.onEventHandler.apply(d,[b.raw].concat(__slice.call(a))):void 0)return b;throw new Error(""+b.hook.typeName+" types do not support events")},i=function(){var a,b,c,d;b=arguments[0],a=2>arguments.length?[]:__slice.call(arguments,1);if(c=typeof (d=b.hook).offEventHandler=="function"?d.offEventHandler.apply(d,[b.raw].concat(__slice.call(a))):void 0)return b;throw new Error(""+b.hook.typeName+" types do not support events")},k=function(){var a,b,c,d;b=arguments[0],a=2>arguments.length?[]:__slice.call(arguments,1);if(c=typeof (d=b.hook).triggerEventHandler=="function"?d.triggerEventHandler.apply(d,[b.raw].concat(__slice.call(a))):void 0)return b;throw new Error(""+b.hook.typeName+" types do not support events")},g=function(a){var b;return typeof (b=a.hook).detectInterface=="function"?b.detectInterface(a.raw):void 0},h=function(a){var b;return typeof (b=a.hook).detectOtherInterface=="function"?b.detectOtherInterface(a.raw):void 0},e={event:null,subjectInterface:null,observerInterface:null,converter:null,triggerOnBind:!0},d=function(a,b,d){var i,k,l,m,n,o,p,q,r,s,t,u;for(o in e)s=e[o],d[o]||(d[o]=s);(k=d.converter)&&!c.isFunction(k)&&(k=b.object[k]);if(!(q=d.subjectInterface)&&!(q=g(a)||h(b))&&!k)throw new Error("An interface for "+a.hook.typeName+" objects could not be detected");if(!(p=d.observerInterface)&&!(p=g(b)||h(a)))throw new Error("An interface for "+b.hook.typeName+" objects could not be detected");(m=d.event)||(m=f(a,q)),c.isArray(m)||(m=[m]),r=d.triggerOnBind;for(t=0,u=m.length;t<u;t++)l=m[t],n=function(){if(b._channels[a.guid][p].open===!0)return s=a.get(q),k&&(s=k(s)),b.set(p,s)},(i=b._channels[a.guid])||(i=b._channels[a.guid]={}),i[p]={open:!0,event:l,subject:a,observer:b,subjectInterface:q,handler:n},j(a,l,n),r&&n()},b=function(){var a,b,e,f,g,h,i,j,k;i=arguments[0],f=arguments[1],e=3>arguments.length?[]:__slice.call(arguments,2),h=e,a=e[0],b=e[1];if(c.isFunction(a))h={converter:a};else if(c.isArray(a)||!c.isObject(a))h={subjectInterface:a,observerInterface:b};c.isArray(h)||(h=[h]);for(j=0,k=h.length;j<k;j++)g=h[j],d(i,f,g)},b})