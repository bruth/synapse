var __slice=Array.prototype.slice;_.isObject||(_.isObject=function(a){return a===Object(a)}),function(){var a,b;a={autoExtendObjects:!0,debug:!1},b=this.Synapse||{},_.defaults(b,a);return this.SYN=this.Synapse=function(){var a;a=function(b){return new a.fn.init(b)},a.version="0.1",a.guid=1,a.cache={},a.log=function(){if(a.conf.debug)try{return console.log.apply(console,arguments)}catch(b){try{return opera.postError.apply(opera,arguments)}catch(b){return alert(Array.prototype.join.call(arguments," "))}}},a.conf=b,a.types={object:0,jquery:1,model:2},a.getObjectType=function(b){if(b instanceof $)return a.types.jquery;if(b instanceof Backbone.Model)return a.types.model;return a.types.object},a.fn=a.prototype={constructor:a,observers:{},notifiers:{},init:function(b){if(b instanceof a)return b;_.isString(b)||_.isElement(b)?b=$.prototype.constructor.call($,arguments):$.isPlainObject(b)&&_.extend(b,Backbone.Events),this.guid=a.guid++,this.type=a.getObjectType(b),this.context=b,a.cache[this.guid]=this;return this},bind:function(){return this.context.bind.apply(this,arguments)},unbind:function(){return this.context.unbind.apply(this,arguments)},trigger:function(){return this.context.trigger.apply(this,arguments)},get:function(b){return a.interfaces.get(this.context,b)},set:function(b,c){return a.interfaces.set(this.context,b,c)},sync:function(b){a.registerSync(this,b);return this},observe:function(b,c){a.registerObserver(this,b,c);return this},notify:function(b,c){a.registerObserver(b,this,c);return this}},a.fn.init.prototype=a.fn;return a}()}(),Synapse.defaultDomEvents=[["a,:button,:reset","click"],["select,:checkbox,:radio,textarea","change"],[":submit","submit"],[":input","keyup"]],Synapse.detectDomEvent=function(a){var b,c,d,e,f,g;g=Synapse.defaultDomEvents;for(e=0,f=g.length;e<f;e++){c=g[e],d=c[0],b=c[1];if(a.context.is(d))return b}throw new Error("Event for "+a+" could not be detected.")},Synapse.getEvents=function(a,b){var c;if(!b)if(a.type===Synapse.types.jquery)c=[Synapse.detectDomEvent(a)];else if(a.type===Synapse.types.model)c=["change"];else throw new Error("No event defined for subject");else c=_.isArray(b)?b:[b];return c},function(){var a;a={events:null,interfaces:null,handler:null,prepopulate:!0},Synapse.registerSync=function(a,b){Synapse.registerObserver(a,b);return Synapse.registerObserver(b,a)};return Synapse.registerObserver=function(a,b,c){var d,e,f,g,h,i,j,k,l,m,n,o,p;a instanceof Synapse||(a=Synapse(a)),b instanceof Synapse||(b=Synapse(b)),i={},_.isString(c)||_.isArray(c)?c={"interface":c}:_.isFunction(c)&&(c={handler:c}),_.extend(i,defaultOptions,c),e=Synapse.getEvents(b,i.event),g=Synapse.getInterfaces(a,b,i.interface),f=i.handler,f&&!_.isFunction(f)&&(f=a[f]),j=Synapse.handlers[a.type].receiver,k=Synapse.handlers[b.type].sender,p=[];for(m=0,n=e.length;m<n;m++)d=e[m],p.push(function(){var c;c=[];for(h in g)l=g[h],o=j(a,h,f),_.isArray(l)&&(l=[l]),c.push(function(){var a,c,e;e=[];for(a=0,c=l.length;a<c;a++)l=l[a],e.push(k(b,d,sinterface,o,config.prepopulate));return e}());return c}());return p}}(),Synapse.defaultElementInterfaces=[[":checkbox","checked"],[":radio","checked"],["button","html"],[":input","value"],["*","text"]],Synapse.detectElementInterface=function(a){var b,c,d,e,f,g;g=Synapse.defaultElementInterfaces;for(e=0,f=g.length;e<f;e++){c=g[e],d=c[0],b=c[1];if(a.context.is(d))return b}throw new Error("Interface for "+a+" could not be detected.")},Synapse.getInterfaces=function(a,b,c){var d,e,f,g;d={};if(!c){e=null,f=null;if(b.type===Synapse.types.jquery){f=Synapse.detectElementInterface(b);if((g=a.type)===Synapse.types.model||g===Synapse.types.evented)e=b.object.attr("name")}a.type===Synapse.types.jquery&&(e=Synapse.detectElementInterface(a),f||(f=a.object.attr("name")||null)),f===null&&b.type===Synapse.types.model&&(f="");if(e===null||f===null)throw new Error("The interface could be detected");d[e]=f}else if(_.isString(c)||_.isArray(c)){f=c;if(a.type===Synapse.types.jquery)e=Synapse.detectElementInterface(a);else if(_.isString(c))e=f;else throw new Error("The observer interface could not be determined");d[e]=f}else d=c;return d},Synapse.interfaces=function(){return{registry:{},register:function(a){return this.registry[a.name]=a},unregister:function(a){return delete this.registry[a]},get:function(){var a,b,c,d,e;b=arguments[0],d=arguments[1],a=3<=arguments.length?__slice.call(arguments,2):[],b instanceof Synapse&&(b=b.object),e=d.split(":"),d=e[0],c=e[1],c!=null&&(a=[c].concat(a));return this.registry[d].get.apply(b,a)},set:function(){var a,b,c,d,e;b=arguments[0],d=arguments[1],a=3<=arguments.length?__slice.call(arguments,2):[],b instanceof Synapse&&(b=b.object),e=d.split(":"),d=e[0],c=e[1],c!=null&&(a=[c].concat(a));return this.registry[d].set.apply(b,a)}}}(),function(){var a,b,c,d,e,f;b=function(b){if(this.prop!=null)return this.prop(b);return a.call(this,b)},e=function(a,b){if(this.prop!=null){if(typeof a=="object")return this.prop(a);return this.prop(a,b)}return d.call(this,a,b)},a=function(a){return this.attr(a)},d=function(a,b){if(typeof a=="object")return this.attr(a);return this.attr(a,b)},c=function(a){return this.css(a)},f=function(a,b){if(typeof a=="object")return this.css(a);return this.css(a,b)},Synapse.interfaces.register({name:"prop",get:function(a){return b.call(this,a)},set:function(a,b){return e.call(this,a,b)}}),Synapse.interfaces.register({name:"attr",get:function(b){return a.call(this,b)},set:function(a,b){return d.call(this,a,b)}}),Synapse.interfaces.register({name:"style",get:function(a){return c.call(this,a)},set:function(a,b){return f.call(this,a,b)}}),Synapse.interfaces.register({name:"text",get:function(){return this.text()},set:function(a){return this.text((a||(a=""))+"")}}),Synapse.interfaces.register({name:"html",get:function(){return this.html()},set:function(a){return this.html((a||(a=""))+"")}}),Synapse.interfaces.register({name:"value",get:function(){return this.val()},set:function(a){return this.val(a||(a=""))}}),Synapse.interfaces.register({name:"enabled",get:function(){return!b.call(this,"disabled")},set:function(a){_.isArray(a)&&a.length===0&&(a=!1);return e.call(this,"disabled",!Boolean(a))}}),Synapse.interfaces.register({name:"disabled",get:function(){return b.call(this,"disabled")},set:function(a){_.isArray(a)&&a.length===0&&(a=!1);return e.call(this,"disabled",Boolean(a))}}),Synapse.interfaces.register({name:"checked",get:function(){return b.call(this,"checked")},set:function(a){_.isArray(a)&&a.length===0&&(a=!1);return e.call(this,"checked",Boolean(a))}}),Synapse.interfaces.register({name:"visible",get:function(){return c.call(this,"display")===!1},set:function(a){_.isArray(a)&&a.length===0&&(a=!1);return Boolean(a)?this.show():this.hide()}}),Synapse.interfaces.register({name:"hidden",get:function(){return c.call(this,"display")==="none"},set:function(a){_.isArray(a)&&a.length===0&&(a=!1);return Boolean(a)?this.hide():this.show()}});return Synapse.interfaces.register({name:"css",get:function(a){return this.hasClass(a)},set:function(a,b){_.isArray(b)&&b.length===0&&(b=!1);return Boolean(b)?this.addClass(a):this.removeClass(a)}})}(),Synapse.handlers={0:{send:function(a,b,c,d,e){b.bind(a,function(){var a;a=this.get(c);return d(this.context,c,a)});if(e)return b.context.trigger(a)},receive:function(a,b,c){return function(d,e){c&&(e=c(a.context,b,e));return a.set(b,e)}}},1:{send:function(a,b,c,d){b.bind(a,function(){var a;a=this.get(c);return d(this.context,c,a)});if(populate)return b.trigger(a)}},receive:function(a,b,c){return function(d,e){c&&(e=c(a.context,b,e));return a.set(b,e)}},2:{send:function(a,b,c,d){c&&(a=""+a+":"+c),b.bind(a,function(a,b,e){return d(this.context,c,b)});if(populate)return b.trigger(a,b,b.get(c))},receive:function(a,b,c){return function(d,e){var f;c&&(e=c(a.context,b,e)),f={},f[b]=e;return this.set(f)}}}}